<%- include('../partials/header') %> <%- include('../partials/nav') %>

<main class="container admin-panel">
  <div class="admin-header">
    <h1>Painel de Administração</h1>
    <a href="/admin/add" class="btn btn-primary">+ Adicionar Filme</a>
  </div>

  <table class="admin-table">
    <thead>
      <tr>
        <th>Título</th>
        <th>Ano</th>
        <th>Gênero</th>
        <th>Avaliação</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <% movies.forEach(movie => { %>
      <tr>
        <td><%= movie.title %></td>
        <td><%= movie.year %></td>
        <td><%= movie.genres.join(', ') %></td>
        <td>⭐ <%= movie.rating %></td>
        <td class="actions">
          <a href="/admin/edit/<%= movie.id %>" class="btn btn-secondary"
            >Editar</a
          >
          <form
            action="/admin/delete/<%= movie.id %>"
            method="POST"
            style="display: inline"
          >
            <input type="hidden" name="_method" value="DELETE" />
            <button type="submit" class="btn btn-danger">Excluir</button>
          </form>
        </td>
      </tr>
      <% }) %>
    </tbody>
  </table>
</main>

<%- include('../partials/footer') %>
